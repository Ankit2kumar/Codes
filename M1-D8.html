<!DOCTYPE html>
<!--
ASSIGNMENT TOPIC
You are building a task list site.
The have a list of tasks and can, at any time, add a new one, delete one or sort the whole bunch of them
-->
<html lang="en">
	<head>
		<!-- EXERCISE 1:
    Specify the title, the charset (UTF-8) and the viewport of the page.
    -->
		<title>Task List</title>

		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
			/* EXERCISE 2:  
       Create a CSS class for the task list with a diverse background
       Create a CSS class for the task list item with a border, a bold text and a bigger font size
       Style every button of the page to be bigger
    */
			.taskList {
				background-color: aliceblue;
			}
			.taskList li {
				border-radius: 10px;
				border-color: black;
				font-weight: bolder;
				font-size: larger;
			}
			button {
				size: 50px;
			}
		</style>
	</head>
	<body>
		<h1>Welcome to your personal Task List!</h1>
		<br />

		<span
			>You can add any task you like by writing it in the specified field and
			then press "Add new task"</span
		><br /><br />

		<input type="text" id="newTask" />
		<input type="button" value="Add new Task" onclick="addNewTask()" />

		<!-- EXERCISE 3
        Create a button "Remove Last Task" to trigger the method "removeLast"
        -->
		<input type="button" value="Remove Last Task" onclick="removeLast()" />

		<!-- EXERCISE 4
        Create a button "Remove First Task" to trigger the method "removeFirst"
        -->
		<input type="button" value="Remove First Task" onclick="removeFirst()" />
		<ul id="myTaskList"></ul>

		<hr />

		<input type="color" placeholder="Color" id="colorPicker" />
		<input
			type="button"
			value="Change task background"
			onclick="changeTaskBackgroundColor()"
		/>

		<hr />

		<input type="button" value="Sort" onclick="bubbleSort()" />

		<script>
			/* EXERCISE 5:
                   Add a new task to the list.
                   Suggestion:
                   - Use document.getElementById to get the UL item and the input text
                   - Use the document.createElement to create the new List Item
                   - Append the child to the UL
               */
			const addNewTask = function () {
				let newLi = document.createElement('LI');
				let newLiText = document.querySelector('#newTask').value;

				newLi.innerText = newLiText;
				document.querySelector('#myTaskList').appendChild(newLi);
			};

			/* EXERCISE 6:
                   Create a method "removeLast" which removes the last item from the task list
               */

			const removeLast = function () {
				let ul = document.querySelector('#myTaskList');
				let last = ul.lastElementChild;
				ul.removeChild(last);
			};

			/* EXERCISE 7:
                   Create a method "removeFirst" which removes the first item from the task list
               */

			const removeFirst = function () {
				let ul = document.querySelector('#myTaskList');
				let first = ul.firstElementChild;
				ul.removeChild(first);
			};

			/* EXERCISE 8:
                  Create a method "getTasksAsArray" which returns, and prints to the console an array containing the tasks as string
               */
			const getTasksAsArray = function () {
				let arr = [];
				let ul = document.querySelector('#myTaskList');
				ul.childNodes.forEach((element) => arr.push(element.innerText));
				return arr;
			};
			/* EXERCISE 9:
                  Create a method "changeTaskBackgroundColor" which takes the color from the color picker with an
                  onchange event listener ad applies it as background to every list item
               */
			const changeTaskBackgroundColor = function () {
				let color = document.querySelector('#colorPicker').value;
				let ul = document.querySelector('#myTaskList');
				ul.childNodes.forEach(
					(element) => (element.style.backgroundColor = color)
				);
			};

			/* EXTRA */

			/* EXERCISE 10:
                  Create a method "bubbleSort()" which sort the task list alphabetically using the bubble sort algorithm

                  Use your spare time to beautify your task list via CSS.

                  Suggestion:
                  - Break the code into many function for semplicity
                  - Reuse the functions previously created

                  */
			const bubbleSort = function () {
				let sortedArr = [];

				sortedArr = getTasksAsArray().sort();
				//  console.log(sortedArr);
				let ul = document.querySelector('#myTaskList');
				ul.innerHTML = '';
				for (let i = 0; i < sortedArr.length; i++) {
					//console.log(ul.childNodes[i].innertext);
					//ul.innerHTML += `<li>${sortedArr[i]}</li>`
					const li = document.createElement('li');
					li.innerText = sortedArr[i];
					ul.appendChild(li);
					//ul.childNodes[i].innertext = sortedArr[i];
				}
			};
		</script>
	</body>
</html>
